
import com.fasterxml.jackson.databind.DeserializationFeature;
import com.fasterxml.jackson.databind.ObjectMapper;
import gr.uaegean.pojo.VerifiableCredential;
import java.io.IOException;
import static org.junit.Assert.assertEquals;
import org.junit.Test;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
/**
 *
 * @author nikos
 */
public class TestClaimsMarshall {

    @Test
    public void testMarshallUnknown() throws IOException {

        String test = "{\"did\":\"did:ethr:0x19029ecf19cecdf2f1227d10c564d5a3d0b28e85\",\"SEAL-EIDAS\":{\"eidas\":{\"given_name\":\"ΧΡΙΣΤΙΝΑ, CHRISTINA\",\"family_name\":\"ΠΑΛΙΟΚΩΣΤΑ, PALIOKOSTA\",\"source\":\"eidas\"}},\"verified\":[{\"iat\":1585811311,\"exp\":1588403311,\"sub\":\"did:ethr:0x19029ecf19cecdf2f1227d10c564d5a3d0b28e85\",\"claim\":{\"SEAL-EIDAS\":{\"eidas\":{\"given_name\":\"ΧΡΙΣΤΙΝΑ, CHRISTINA\",\"family_name\":\"ΠΑΛΙΟΚΩΣΤΑ, PALIOKOSTA\",\"source\":\"eidas\"}}},\"vc\":[\"/ipfs/QmNbicKYQKCsc7GMXSSJMpvJSYgeQ9K2tH15EnbxTydxfQ\"],\"iss\":\"did:ethr:0xd502a2c71e8c90e82500a70683f75de38d57dd9f\",\"jwt\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NkstUiJ9.eyJpYXQiOjE1ODU4MTEzMTEsImV4cCI6MTU4ODQwMzMxMSwic3ViIjoiZGlkOmV0aHI6MHgxOTAyOWVjZjE5Y2VjZGYyZjEyMjdkMTBjNTY0ZDVhM2QwYjI4ZTg1IiwiY2xhaW0iOnsiU0VBTC1FSURBUyI6eyJlaWRhcyI6eyJnaXZlbl9uYW1lIjoizqfOoc6ZzqPOpM6Zzp3OkSwgQ0hSSVNUSU5BIiwiZmFtaWx5X25hbWUiOiLOoM6RzpvOmc6fzprOqc6jzqTOkSwgUEFMSU9LT1NUQSIsInNvdXJjZSI6ImVpZGFzIn19fSwidmMiOlsiL2lwZnMvUW1OYmljS1lRS0NzYzdHTVhTU0pNcHZKU1lnZVE5SzJ0SDE1RW5ieFR5ZHhmUSJdLCJpc3MiOiJkaWQ6ZXRocjoweGQ1MDJhMmM3MWU4YzkwZTgyNTAwYTcwNjgzZjc1ZGUzOGQ1N2RkOWYifQ.8gFBXFPtCo3JCGc59vpoevKdeIEX2z8fE3KyPjxhB-DC_b0GYPgzPDy_MQZUzsczoN76zzqRuuDOlXTXZjz06wE\"}],\"invalid\":[]}";
        ObjectMapper mapper = new ObjectMapper();

        VerifiableCredential vc = mapper.readValue(test, VerifiableCredential.class);
        assertEquals(vc.getSealEidas().getEidas().getFamilyName(), "ΠΑΛΙΟΚΩΣΤΑ, PALIOKOSTA");

    }

//    @Test
//    public void testMarshallAMKA_MITRO() throws IOException {
//
//        String test = "{\"did\":\"did:ethr:0x19029ecf19cecdf2f1227d10c564d5a3d0b28e85\",\"AMKA\":{\"AMKA\":{\"latinLastName\":\"TRIANTAFYLLOU\",\"birthDate\":\"05/10/1983\",\"latinFirstName\":\"NIKOLAOS\",\"father\":\"ANASTASIOS\",\"mother\":\"ANGELIKI\",\"loa\":\"low\",\"source\":\"AMKA\"}},\"MITRO\":{\"MITRO\":{\"gender\":\"Άρρεν\",\"nationality\":\"Ελληνική\",\"maritalStatus\":\"married\",\"loa\":\"low\",\"source\":\"MITRO\"}},\"verified\":[{\"iat\":1588605910,\"exp\":1591197910,\"sub\":\"did:ethr:0x19029ecf19cecdf2f1227d10c564d5a3d0b28e85\",\"claim\":{\"AMKA\":{\"AMKA\":{\"latinLastName\":\"TRIANTAFYLLOU\",\"birthDate\":\"05/10/1983\",\"latinFirstName\":\"NIKOLAOS\",\"father\":\"ANASTASIOS\",\"mother\":\"ANGELIKI\",\"loa\":\"low\",\"source\":\"AMKA\"}}},\"vc\":[\"/ipfs/QmNbicKYQKCsc7GMXSSJMpvJSYgeQ9K2tH15EnbxTydxfQ\"],\"iss\":\"did:ethr:0xd502a2c71e8c90e82500a70683f75de38d57dd9f\",\"jwt\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NkstUiJ9.eyJpYXQiOjE1ODg2MDU5MTAsImV4cCI6MTU5MTE5NzkxMCwic3ViIjoiZGlkOmV0aHI6MHgxOTAyOWVjZjE5Y2VjZGYyZjEyMjdkMTBjNTY0ZDVhM2QwYjI4ZTg1IiwiY2xhaW0iOnsiQU1LQSI6eyJBTUtBIjp7ImxhdGluTGFzdE5hbWUiOiJUUklBTlRBRllMTE9VIiwiYmlydGhEYXRlIjoiMDUvMTAvMTk4MyIsImxhdGluRmlyc3ROYW1lIjoiTklLT0xBT1MiLCJmYXRoZXIiOiJBTkFTVEFTSU9TIiwibW90aGVyIjoiQU5HRUxJS0kiLCJsb2EiOiJsb3ciLCJzb3VyY2UiOiJBTUtBIn19fSwidmMiOlsiL2lwZnMvUW1OYmljS1lRS0NzYzdHTVhTU0pNcHZKU1lnZVE5SzJ0SDE1RW5ieFR5ZHhmUSJdLCJpc3MiOiJkaWQ6ZXRocjoweGQ1MDJhMmM3MWU4YzkwZTgyNTAwYTcwNjgzZjc1ZGUzOGQ1N2RkOWYifQ.FYArK-xVn4i0jHTXxDHo88UrxrVSmvSjZ6JCcshG-bRBsCpBPMryzGTgoBUwCQm0kQ_wmlM7UkbOmSlT0RG75AE\"},{\"iat\":1588667551,\"exp\":1591259551,\"sub\":\"did:ethr:0x19029ecf19cecdf2f1227d10c564d5a3d0b28e85\",\"claim\":{\"MITRO\":{\"MITRO\":{\"gender\":\"Άρρεν\",\"nationality\":\"Ελληνική\",\"maritalStatus\":\"married\",\"loa\":\"low\",\"source\":\"MITRO\"}}},\"vc\":[\"/ipfs/QmNbicKYQKCsc7GMXSSJMpvJSYgeQ9K2tH15EnbxTydxfQ\"],\"iss\":\"did:ethr:0xd502a2c71e8c90e82500a70683f75de38d57dd9f\",\"jwt\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NkstUiJ9.eyJpYXQiOjE1ODg2Njc1NTEsImV4cCI6MTU5MTI1OTU1MSwic3ViIjoiZGlkOmV0aHI6MHgxOTAyOWVjZjE5Y2VjZGYyZjEyMjdkMTBjNTY0ZDVhM2QwYjI4ZTg1IiwiY2xhaW0iOnsiTUlUUk8iOnsiTUlUUk8iOnsiZ2VuZGVyIjoizobPgc-BzrXOvSIsIm5hdGlvbmFsaXR5IjoizpXOu867zrfOvc65zrrOriIsIm1hcml0YWxTdGF0dXMiOiJtYXJyaWVkIiwibG9hIjoibG93Iiwic291cmNlIjoiTUlUUk8ifX19LCJ2YyI6WyIvaXBmcy9RbU5iaWNLWVFLQ3NjN0dNWFNTSk1wdkpTWWdlUTlLMnRIMTVFbmJ4VHlkeGZRIl0sImlzcyI6ImRpZDpldGhyOjB4ZDUwMmEyYzcxZThjOTBlODI1MDBhNzA2ODNmNzVkZTM4ZDU3ZGQ5ZiJ9.Oa9SWvlLqFGttKV7kp2qc9wWTm2jrpCt6w9zA544DAV432NXO62gpDVTeEwkN26Cc3VWTQ1JfyZM6CDDAstQZwE\"}],\"invalid\":[]}";
//        ObjectMapper mapper = new ObjectMapper();
//        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
//
//        VerifiableCredential vc = mapper.readValue(test, VerifiableCredential.class);
//        System.out.println(vc.toString());
//        assertEquals(vc.getAmka().getAmka().getFather(), "ANASTASIOS");
//
//    }

    //{"did":"did:ethr:0x71c67e7a9d0e203aca7305ad7ab39853dd3e5cc0","TAXIS":{"TAXIS":{"mothersNameLatin":"Aggeliki","fathersNameLatin":"Anastasios","lastNameLatin":"Triantafyllou","lastName":"Τριανταφύλλου","dateOfBirth":"05/10/1983","afm":"070892XX","gender":"male","mothersName":"Αγγελική","fathersName":"Αναστάσιος","fistName":"Νικόλαος","loa":"low","amka":"051083046XX","source":"TAXIS","firstNameLatin":"Nikolaos","nationality":"Greek"}},"verified":[{"iat":1593497155,"exp":1596089155,"sub":"did:ethr:0x71c67e7a9d0e203aca7305ad7ab39853dd3e5cc0","claim":{"TAXIS":{"TAXIS":{"afm":"070892XX","amka":"051083046XX","lastName":"Τριανταφύλλου","fistName":"Νικόλαος","fathersName":"Αναστάσιος","mothersName":"Αγγελική","fathersNameLatin":"Anastasios","mothersNameLatin":"Aggeliki","firstNameLatin":"Nikolaos","lastNameLatin":"Triantafyllou","gender":"male","nationality":"Greek","loa":"low","source":"TAXIS","dateOfBirth":"05/10/1983"}}},"vc":["/ipfs/QmNbicKYQKCsc7GMXSSJMpvJSYgeQ9K2tH15EnbxTydxfQ"],"iss":"did:ethr:0xd502a2c71e8c90e82500a70683f75de38d57dd9f","jwt":"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NkstUiJ9.eyJpYXQiOjE1OTM0OTcxNTUsImV4cCI6MTU5NjA4OTE1NSwic3ViIjoiZGlkOmV0aHI6MHg3MWM2N2U3YTlkMGUyMDNhY2E3MzA1YWQ3YWIzOTg1M2RkM2U1Y2MwIiwiY2xhaW0iOnsiVEFYSVMiOnsiVEFYSVMiOnsiYWZtIjoiMDcwODkyWFgiLCJhbWthIjoiMDUxMDgzMDQ2WFgiLCJsYXN0TmFtZSI6Is6kz4HOuc6xzr3PhM6xz4bPjc67zrvOv8-FIiwiZmlzdE5hbWUiOiLOnc65zrrPjM67zrHOv8-CIiwiZmF0aGVyc05hbWUiOiLOkc69zrHPg8-EzqzPg865zr_PgiIsIm1vdGhlcnNOYW1lIjoizpHOs86zzrXOu865zrrOriIsImZhdGhlcnNOYW1lTGF0aW4iOiJBbmFzdGFzaW9zIiwibW90aGVyc05hbWVMYXRpbiI6IkFnZ2VsaWtpIiwiZmlyc3ROYW1lTGF0aW4iOiJOaWtvbGFvcyIsImxhc3ROYW1lTGF0aW4iOiJUcmlhbnRhZnlsbG91IiwiZ2VuZGVyIjoibWFsZSIsIm5hdGlvbmFsaXR5IjoiR3JlZWsiLCJsb2EiOiJsb3ciLCJzb3VyY2UiOiJUQVhJUyIsImRhdGVPZkJpcnRoIjoiMDUvMTAvMTk4MyJ9fX0sInZjIjpbIi9pcGZzL1FtTmJpY0tZUUtDc2M3R01YU1NKTXB2SlNZZ2VROUsydEgxNUVuYnhUeWR4ZlEiXSwiaXNzIjoiZGlkOmV0aHI6MHhkNTAyYTJjNzFlOGM5MGU4MjUwMGE3MDY4M2Y3NWRlMzhkNTdkZDlmIn0.mtqqBhsMoSRSZpQMa8qeJ6o4aX_QusuVk0ZsLUyOzGFzzYsRWfFRyA4_2tEODsQ5Q60NdKtR7M125LWPsgtyzAA"}],"invalid":[]}
//    @Test
//    public void testTaxisClaim() throws IOException {
//
//        String test = "{\"did\":\"did:ethr:0x71c67e7a9d0e203aca7305ad7ab39853dd3e5cc0\",\"TAXIS\":{\"TAXIS\":{\"mothersNameLatin\":\"Aggeliki\",\"fathersNameLatin\":\"Anastasios\",\"householdComposition\":[{\"name\":\"Katerina\",\"relation\":\"wife\"},{\"name\":\"xx\",\"relation\":\"daughter\"}],\"lastNameLatin\":\"Triantafyllou\",\"lastName\":\"Τριανταφύλλου\",\"dateOfBirth\":\"05/10/1983\",\"afm\":\"070892XX\",\"gender\":\"male\",\"mothersName\":\"Αγγελική\",\"fathersName\":\"Αναστάσιος\",\"fistName\":\"Νικόλαος\",\"address\":{\"street\":\"Καλλ***\",\"streetNumber\":\"**\",\"PO\":\"15***\",\"municipality\":\"Ζ**\",\"prefecture\":\"Αττικής\"},\"loa\":\"low\",\"amka\":\"051083046XX\",\"source\":\"TAXIS\",\"firstNameLatin\":\"Nikolaos\",\"nationality\":\"Greek\"}},\"verified\":[{\"iat\":1593767579,\"exp\":1596359579,\"sub\":\"did:ethr:0x71c67e7a9d0e203aca7305ad7ab39853dd3e5cc0\",\"claim\":{\"TAXIS\":{\"TAXIS\":{\"afm\":\"070892XX\",\"amka\":\"051083046XX\",\"lastName\":\"Τριανταφύλλου\",\"fistName\":\"Νικόλαος\",\"fathersName\":\"Αναστάσιος\",\"mothersName\":\"Αγγελική\",\"fathersNameLatin\":\"Anastasios\",\"mothersNameLatin\":\"Aggeliki\",\"firstNameLatin\":\"Nikolaos\",\"lastNameLatin\":\"Triantafyllou\",\"gender\":\"male\",\"nationality\":\"Greek\",\"loa\":\"low\",\"source\":\"TAXIS\",\"dateOfBirth\":\"05/10/1983\",\"householdComposition\":[{\"name\":\"Katerina\",\"relation\":\"wife\"},{\"name\":\"xx\",\"relation\":\"daughter\"}],\"address\":{\"street\":\"Καλλ***\",\"streetNumber\":\"**\",\"PO\":\"15***\",\"municipality\":\"Ζ**\",\"prefecture\":\"Αττικής\"}}}},\"vc\":[\"/ipfs/QmNbicKYQKCsc7GMXSSJMpvJSYgeQ9K2tH15EnbxTydxfQ\"],\"iss\":\"did:ethr:0xd502a2c71e8c90e82500a70683f75de38d57dd9f\",\"jwt\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NkstUiJ9.eyJpYXQiOjE1OTM3Njc1NzksImV4cCI6MTU5NjM1OTU3OSwic3ViIjoiZGlkOmV0aHI6MHg3MWM2N2U3YTlkMGUyMDNhY2E3MzA1YWQ3YWIzOTg1M2RkM2U1Y2MwIiwiY2xhaW0iOnsiVEFYSVMiOnsiVEFYSVMiOnsiYWZtIjoiMDcwODkyWFgiLCJhbWthIjoiMDUxMDgzMDQ2WFgiLCJsYXN0TmFtZSI6Is6kz4HOuc6xzr3PhM6xz4bPjc67zrvOv8-FIiwiZmlzdE5hbWUiOiLOnc65zrrPjM67zrHOv8-CIiwiZmF0aGVyc05hbWUiOiLOkc69zrHPg8-EzqzPg865zr_PgiIsIm1vdGhlcnNOYW1lIjoizpHOs86zzrXOu865zrrOriIsImZhdGhlcnNOYW1lTGF0aW4iOiJBbmFzdGFzaW9zIiwibW90aGVyc05hbWVMYXRpbiI6IkFnZ2VsaWtpIiwiZmlyc3ROYW1lTGF0aW4iOiJOaWtvbGFvcyIsImxhc3ROYW1lTGF0aW4iOiJUcmlhbnRhZnlsbG91IiwiZ2VuZGVyIjoibWFsZSIsIm5hdGlvbmFsaXR5IjoiR3JlZWsiLCJsb2EiOiJsb3ciLCJzb3VyY2UiOiJUQVhJUyIsImRhdGVPZkJpcnRoIjoiMDUvMTAvMTk4MyIsImhvdXNlaG9sZENvbXBvc2l0aW9uIjpbeyJuYW1lIjoiS2F0ZXJpbmEiLCJyZWxhdGlvbiI6IndpZmUifSx7Im5hbWUiOiJ4eCIsInJlbGF0aW9uIjoiZGF1Z2h0ZXIifV0sImFkZHJlc3MiOnsic3RyZWV0IjoizprOsc67zrsqKioiLCJzdHJlZXROdW1iZXIiOiIqKiIsIlBPIjoiMTUqKioiLCJtdW5pY2lwYWxpdHkiOiLOlioqIiwicHJlZmVjdHVyZSI6Is6Rz4TPhM65zrrOrs-CIn19fX0sInZjIjpbIi9pcGZzL1FtTmJpY0tZUUtDc2M3R01YU1NKTXB2SlNZZ2VROUsydEgxNUVuYnhUeWR4ZlEiXSwiaXNzIjoiZGlkOmV0aHI6MHhkNTAyYTJjNzFlOGM5MGU4MjUwMGE3MDY4M2Y3NWRlMzhkNTdkZDlmIn0.ImkccpkCNK_tJOOKeEZS3TjDUg0OyC60A05MRODfPxo_ZW2jf6_vOB66TD8XJelOUxqPSyICpoI277h2fwcUYwE\"}],\"invalid\":[]}";
//        ObjectMapper mapper = new ObjectMapper();
//        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
//
//        VerifiableCredential vc = mapper.readValue(test, VerifiableCredential.class);
//        System.out.println(vc.toString());
//        assertEquals(vc.getTaxisRoute().getTaxis().getFathersName(), "Αναστάσιος");
//        assertEquals(vc.getTaxisRoute().getTaxis().getFirstNameLatin(), "Nikolaos");
////        assertEquals("wife", vc.getTaxisRoute().getTaxis().getHousehold()[0].getRelation());
//        assertEquals("**", vc.getTaxisRoute().getTaxis().getAddress().getStreetNumber());
//
//    }

    //"did":"did:ethr:0x71c67e7a9d0e203aca7305ad7ab39853dd3e5cc0","SELF":{"self":{"oaedid":"213","oaedDate":"10/03/20","personal":"none","source":"self","loa":"low"}},"verified":[{"iat":1593512397,"exp":1596104397,"sub":"did:ethr:0x71c67e7a9d0e203aca7305ad7ab39853dd3e5cc0","claim":{"SELF":{"self":{"oaedid":"213","oaedDate":"10/03/20","personal":"none","source":"self","loa":"low"}}},"vc":["/ipfs/QmNbicKYQKCsc7GMXSSJMpvJSYgeQ9K2tH15EnbxTydxfQ"],"iss":"did:ethr:0xd502a2c71e8c90e82500a70683f75de38d57dd9f","jwt":"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NkstUiJ9.eyJpYXQiOjE1OTM1MTIzOTcsImV4cCI6MTU5NjEwNDM5Nywic3ViIjoiZGlkOmV0aHI6MHg3MWM2N2U3YTlkMGUyMDNhY2E3MzA1YWQ3YWIzOTg1M2RkM2U1Y2MwIiwiY2xhaW0iOnsiU0VMRiI6eyJzZWxmIjp7Im9hZWRpZCI6IjIxMyIsIm9hZWREYXRlIjoiMTAvMDMvMjAiLCJwZXJzb25hbCI6Im5vbmUiLCJzb3VyY2UiOiJzZWxmIiwibG9hIjoibG93In19fSwidmMiOlsiL2lwZnMvUW1OYmljS1lRS0NzYzdHTVhTU0pNcHZKU1lnZVE5SzJ0SDE1RW5ieFR5ZHhmUSJdLCJpc3MiOiJkaWQ6ZXRocjoweGQ1MDJhMmM3MWU4YzkwZTgyNTAwYTcwNjgzZjc1ZGUzOGQ1N2RkOWYifQ.UuUXtTYGguFgWr75tzlCEFGBc6FaaDleBJPXfY7U85GQwlrSqv7Vfkz_XrDIftMBjLjHeclwoNXGV_QcfRtW6AA"}],"invalid":[]}
    @Test
    public void testSelfClaim() throws IOException {

        String test = "{\"did\":\"did:ethr:0x15b7f1bb2ee02b6cd8c3ad2da413d5128e7e933f\",\"KEA_PERSONAL_DECLARATION\":{\"claims\":{\"luxury\":\"false\",\"hospitalized\":\"false\",\"hospitalized_specific\":\"false\",\"OAED_reg_date\":\"05-10-20\",\"monk\":\"false\",\"FEAD_provider\":\"fead provider\",\"FEAD_participate\":true,\"OAED_id\":\"12345\",\"employed\":\"false\",\"employment_status\":\"unemployed\"},\"metadata\":{\"source\":\"self\",\"id\":\"IIHO5\"}},\"verified\":[{\"iat\":1608282138,\"exp\":1618650138,\"sub\":\"did:ethr:0x15b7f1bb2ee02b6cd8c3ad2da413d5128e7e933f\",\"claim\":{\"KEA_PERSONAL_DECLARATION\":{\"claims\":{\"luxury\":\"false\",\"hospitalized_specific\":\"false\",\"hospitalized\":\"false\",\"monk\":\"false\",\"OAED_id\":\"12345\",\"OAED_reg_date\":\"05-10-20\",\"FEAD_participate\":true,\"FEAD_provider\":\"fead provider\",\"employed\":\"false\",\"employment_status\":\"unemployed\"},\"metadata\":{\"source\":\"self\",\"id\":\"IIHO5\"}}},\"vc\":[\"/ipfs/QmWLCkXmpQSQG6kcf88kZbNCRHFbfZzHG8hSbdn7QndQTL\"],\"iss\":\"did:ethr:0xd502a2c71e8c90e82500a70683f75de38d57dd9f\",\"jwt\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NkstUiJ9.eyJpYXQiOjE2MDgyODIxMzgsImV4cCI6MTYxODY1MDEzOCwic3ViIjoiZGlkOmV0aHI6MHgxNWI3ZjFiYjJlZTAyYjZjZDhjM2FkMmRhNDEzZDUxMjhlN2U5MzNmIiwiY2xhaW0iOnsiS0VBX1BFUlNPTkFMX0RFQ0xBUkFUSU9OIjp7ImNsYWltcyI6eyJsdXh1cnkiOiJmYWxzZSIsImhvc3BpdGFsaXplZF9zcGVjaWZpYyI6ImZhbHNlIiwiaG9zcGl0YWxpemVkIjoiZmFsc2UiLCJtb25rIjoiZmFsc2UiLCJPQUVEX2lkIjoiMTIzNDUiLCJPQUVEX3JlZ19kYXRlIjoiMDUtMTAtMjAiLCJGRUFEX3BhcnRpY2lwYXRlIjp0cnVlLCJGRUFEX3Byb3ZpZGVyIjoiZmVhZCBwcm92aWRlciIsImVtcGxveWVkIjoiZmFsc2UiLCJlbXBsb3ltZW50X3N0YXR1cyI6InVuZW1wbG95ZWQifSwibWV0YWRhdGEiOnsic291cmNlIjoic2VsZiIsImlkIjoiSUlITzUifX19LCJ2YyI6WyIvaXBmcy9RbVdMQ2tYbXBRU1FHNmtjZjg4a1piTkNSSEZiZlp6SEc4aFNiZG43UW5kUVRMIl0sImlzcyI6ImRpZDpldGhyOjB4ZDUwMmEyYzcxZThjOTBlODI1MDBhNzA2ODNmNzVkZTM4ZDU3ZGQ5ZiJ9.Jgyo9p_w6lfutKIcYmR6Vesm094p-kv2ZZBzf2lAkg33z7_XvVfVqv1CcRHKmy8NHK9b9YB5xjD8RoPiOgjAJgE\"}],\"invalid\":[]}";
        ObjectMapper mapper = new ObjectMapper();
        VerifiableCredential vc = mapper.readValue(test, VerifiableCredential.class);
        System.out.println(vc.toString());
        assertEquals(vc.getDeclaration().getClaims().getOAEDId(), "12345");

    }

    @Test
    public void testContact() throws IOException {
        String test = "{\"did\":\"did:ethr:0x15b7f1bb2ee02b6cd8c3ad2da413d5128e7e933f\",\"CONTACT_ME\":{\"claims\":{\"name\":\"ΝΙΚΟΛΑΟΣ\",\"surname\":\"ΤΡΙΑΝΤΑΦΥΛΛΟΥ\",\"email\":\"triantafyllou.ni@gmail.com\",\"landline\":\"2107786359\",\"mobile\":\"00306943808730\",\"iban\":\"123456778123\"},\"metadata\":{\"source\":\"endorsed\",\"endorser\":\"triantafyllou.ni@gmail.com\",\"verification\":\"kT_2ufBDiZnZreMlIKG7qg\",\"id\":\"K0DMS\"}},\"verified\":[{\"iat\":1603970612,\"exp\":1614511412,\"sub\":\"did:ethr:0x15b7f1bb2ee02b6cd8c3ad2da413d5128e7e933f\",\"claim\":{\"CONTACT_ME\":{\"claims\":{\"name\":\"ΝΙΚΟΛΑΟΣ\",\"surname\":\"ΤΡΙΑΝΤΑΦΥΛΛΟΥ\",\"email\":\"triantafyllou.ni@gmail.com\",\"landline\":\"2107786359\",\"mobile\":\"00306943808730\",\"iban\":\"123456778123\"},\"metadata\":{\"source\":\"endorsed\",\"endorser\":\"triantafyllou.ni@gmail.com\",\"verification\":\"kT_2ufBDiZnZreMlIKG7qg\",\"id\":\"K0DMS\"}}},\"vc\":[\"/ipfs/QmWLCkXmpQSQG6kcf88kZbNCRHFbfZzHG8hSbdn7QndQTL\"],\"iss\":\"did:ethr:0xd502a2c71e8c90e82500a70683f75de38d57dd9f\",\"jwt\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NkstUiJ9.eyJpYXQiOjE2MDM5NzA2MTIsImV4cCI6MTYxNDUxMTQxMiwic3ViIjoiZGlkOmV0aHI6MHgxNWI3ZjFiYjJlZTAyYjZjZDhjM2FkMmRhNDEzZDUxMjhlN2U5MzNmIiwiY2xhaW0iOnsiQ09OVEFDVF9NRSI6eyJjbGFpbXMiOnsibmFtZSI6Is6dzpnOms6fzpvOkc6fzqMiLCJzdXJuYW1lIjoizqTOoc6ZzpHOnc6kzpHOps6lzpvOm86fzqUiLCJlbWFpbCI6InRyaWFudGFmeWxsb3UubmlAZ21haWwuY29tIiwibGFuZGxpbmUiOiIyMTA3Nzg2MzU5IiwibW9iaWxlIjoiMDAzMDY5NDM4MDg3MzAiLCJpYmFuIjoiMTIzNDU2Nzc4MTIzIn0sIm1ldGFkYXRhIjp7InNvdXJjZSI6ImVuZG9yc2VkIiwiZW5kb3JzZXIiOiJ0cmlhbnRhZnlsbG91Lm5pQGdtYWlsLmNvbSIsInZlcmlmaWNhdGlvbiI6ImtUXzJ1ZkJEaVpuWnJlTWxJS0c3cWciLCJpZCI6IkswRE1TIn19fSwidmMiOlsiL2lwZnMvUW1XTENrWG1wUVNRRzZrY2Y4OGtaYk5DUkhGYmZaekhHOGhTYmRuN1FuZFFUTCJdLCJpc3MiOiJkaWQ6ZXRocjoweGQ1MDJhMmM3MWU4YzkwZTgyNTAwYTcwNjgzZjc1ZGUzOGQ1N2RkOWYifQ.n1UPmHa-7O5tgUZWEwMHxKmFJM0wIIw6h900SciIw0uZAla0sS4enfWQqmJTv6eXhbiKM3smyViel1H3H8uK_gE\"}],\"invalid\":[]}";
        ObjectMapper mapper = new ObjectMapper();
        VerifiableCredential vc = mapper.readValue(test, VerifiableCredential.class);
        System.out.println(vc.toString());
        assertEquals(vc.getContact().getClaims().getIban(), "123456778123");

    }

    @Test
    public void testMitro() throws IOException {
        String test = "{\"did\":\"did:ethr:0x15b7f1bb2ee02b6cd8c3ad2da413d5128e7e933f\",\"Civil_Registry_ID\":{\"claims\":{\"mother_name\":\"Αγγελική\",\"number_of_chidren\":\"2\",\"surname_latin\":\"TRIANTAFYLLOU\",\"mother_name_latin\":\"ANGELIKI\",\"father_name\":\"Αναστάσιος\",\"marital_status\":\"married\",\"custody\":\"yes\",\"gender\":\"Άρρεν\",\"parenthood\":\"true\",\"name\":\"Νικόλαος\",\"birth_date\":\"05/10/1983\",\"father_name_latin\":\"ANASTASIOS\",\"name_latin\":\"NIKOLAOS\",\"amka\":\"05108304675\",\"single_parent\":\"no\",\"nationality\":\"Ελληνική\",\"children_identity\":\"[{\\\"name\\\":\\\"Αγγελική\\\",\\\"surname\\\":\\\"Τριανταφύλλου\\\",\\\"dateOfBirth\\\":\\\"09/02/2017-00:00:00\\\"},{\\\"name\\\":\\\"ΑΚΟ\\\",\\\"surname\\\":\\\"Τριανταφύλλου\\\",\\\"dateOfBirth\\\":\\\"09/04/2020-00:00:00\\\"}]\"},\"metadata\":{\"source\":\"Mitro Politon, AMKA Check\",\"id\":\"XL5H8\"}},\"verified\":[{\"iat\":1608124124,\"exp\":1618492124,\"sub\":\"did:ethr:0x15b7f1bb2ee02b6cd8c3ad2da413d5128e7e933f\",\"claim\":{\"Civil_Registry_ID\":{\"claims\":{\"name\":\"Νικόλαος\",\"name_latin\":\"NIKOLAOS\",\"surname_latin\":\"TRIANTAFYLLOU\",\"father_name\":\"Αναστάσιος\",\"mother_name\":\"Αγγελική\",\"father_name_latin\":\"ANASTASIOS\",\"mother_name_latin\":\"ANGELIKI\",\"birth_date\":\"05/10/1983\",\"amka\":\"05108304675\",\"nationality\":\"Ελληνική\",\"gender\":\"Άρρεν\",\"marital_status\":\"married\",\"parenthood\":\"true\",\"custody\":\"yes\",\"single_parent\":\"no\",\"number_of_chidren\":\"2\",\"children_identity\":\"[{\\\"name\\\":\\\"Αγγελική\\\",\\\"surname\\\":\\\"Τριανταφύλλου\\\",\\\"dateOfBirth\\\":\\\"09/02/2017-00:00:00\\\"},{\\\"name\\\":\\\"ΑΚΟ\\\",\\\"surname\\\":\\\"Τριανταφύλλου\\\",\\\"dateOfBirth\\\":\\\"09/04/2020-00:00:00\\\"}]\"},\"metadata\":{\"source\":\"Mitro Politon, AMKA Check\",\"id\":\"XL5H8\"}}},\"vc\":[\"/ipfs/QmWLCkXmpQSQG6kcf88kZbNCRHFbfZzHG8hSbdn7QndQTL\"],\"iss\":\"did:ethr:0xd502a2c71e8c90e82500a70683f75de38d57dd9f\",\"jwt\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NkstUiJ9.eyJpYXQiOjE2MDgxMjQxMjQsImV4cCI6MTYxODQ5MjEyNCwic3ViIjoiZGlkOmV0aHI6MHgxNWI3ZjFiYjJlZTAyYjZjZDhjM2FkMmRhNDEzZDUxMjhlN2U5MzNmIiwiY2xhaW0iOnsiQ2l2aWxfUmVnaXN0cnlfSUQiOnsiY2xhaW1zIjp7Im5hbWUiOiLOnc65zrrPjM67zrHOv8-CIiwibmFtZV9sYXRpbiI6Ik5JS09MQU9TIiwic3VybmFtZV9sYXRpbiI6IlRSSUFOVEFGWUxMT1UiLCJmYXRoZXJfbmFtZSI6Is6Rzr3Osc-Dz4TOrM-DzrnOv8-CIiwibW90aGVyX25hbWUiOiLOkc6zzrPOtc67zrnOus6uIiwiZmF0aGVyX25hbWVfbGF0aW4iOiJBTkFTVEFTSU9TIiwibW90aGVyX25hbWVfbGF0aW4iOiJBTkdFTElLSSIsImJpcnRoX2RhdGUiOiIwNS8xMC8xOTgzIiwiYW1rYSI6IjA1MTA4MzA0Njc1IiwibmF0aW9uYWxpdHkiOiLOlc67zrvOt869zrnOus6uIiwiZ2VuZGVyIjoizobPgc-BzrXOvSIsIm1hcml0YWxfc3RhdHVzIjoibWFycmllZCIsInBhcmVudGhvb2QiOiJ0cnVlIiwiY3VzdG9keSI6InllcyIsInNpbmdsZV9wYXJlbnQiOiJubyIsIm51bWJlcl9vZl9jaGlkcmVuIjoiMiIsImNoaWxkcmVuX2lkZW50aXR5IjoiW3tcIm5hbWVcIjpcIs6RzrPOs861zrvOuc66zq5cIixcInN1cm5hbWVcIjpcIs6kz4HOuc6xzr3PhM6xz4bPjc67zrvOv8-FXCIsXCJkYXRlT2ZCaXJ0aFwiOlwiMDkvMDIvMjAxNy0wMDowMDowMFwifSx7XCJuYW1lXCI6XCLOkc6azp9cIixcInN1cm5hbWVcIjpcIs6kz4HOuc6xzr3PhM6xz4bPjc67zrvOv8-FXCIsXCJkYXRlT2ZCaXJ0aFwiOlwiMDkvMDQvMjAyMC0wMDowMDowMFwifV0ifSwibWV0YWRhdGEiOnsic291cmNlIjoiTWl0cm8gUG9saXRvbiwgQU1LQSBDaGVjayIsImlkIjoiWEw1SDgifX19LCJ2YyI6WyIvaXBmcy9RbVdMQ2tYbXBRU1FHNmtjZjg4a1piTkNSSEZiZlp6SEc4aFNiZG43UW5kUVRMIl0sImlzcyI6ImRpZDpldGhyOjB4ZDUwMmEyYzcxZThjOTBlODI1MDBhNzA2ODNmNzVkZTM4ZDU3ZGQ5ZiJ9.tXXL8aDGf0usHT0l6OTVjlMPRzi_rqfZ3Ft-TCxyymozQfLA4uxeNlGU3Dqz5XFUiMRkU1WIlqY-YX-94Ct1vwA\"}],\"invalid\":[]}";
        ObjectMapper mapper = new ObjectMapper();
//        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
        VerifiableCredential vc = mapper.readValue(test, VerifiableCredential.class);
        System.out.println(vc.toString());
        assertEquals(vc.getCivilId().getClaims().getNameLatin(), "NIKOLAOS");

    }

    @Test
    public void testE1() throws IOException {
        String test = " {\"did\":\"did:ethr:0x15b7f1bb2ee02b6cd8c3ad2da413d5128e7e933f\",\"PERSONAL_FINANCIAL_STATUS\":{\"claims\":{\"real_estate_value_offshore\":\"123123\",\"deposits\":\"5000\",\"rent_income\":\"0\",\"value_of_owned_vehicles\":\"0\",\"other_benefits_income\":\"0\",\"investments\":\"123123123\",\"household_composition\":\"[{\\\"name\\\":\\\"k\\\",\\\"relation\\\":\\\"wife\\\"},{\\\"name\\\":\\\"a\\\",\\\"relation\\\":\\\"daughter\\\"}]\",\"name\":\"Nikos\",\"surname\":\"T\",\"freelance_activity\":\"0\",\"salary_revenues\":\"100\",\"ekas\":\"0\",\"unemploymenet_benefit\":\"0\",\"farming_activity\":\"0\",\"pension_revenues\":\"200\",\"interests_property\":\"5000\",\"real_estate_value_domestic\":\"123\",\"additional_incomes\":\"1000\"},\"metadata\":{\"source\":\"endorsed\"}},\"verified\":[{\"iat\":1603974644,\"exp\":1614515444,\"sub\":\"did:ethr:0x15b7f1bb2ee02b6cd8c3ad2da413d5128e7e933f\",\"claim\":{\"PERSONAL_FINANCIAL_STATUS\":{\"claims\":{\"name\":\"Nikos\",\"surname\":\"T\",\"household_composition\":\"[{\\\"name\\\":\\\"k\\\",\\\"relation\\\":\\\"wife\\\"},{\\\"name\\\":\\\"a\\\",\\\"relation\\\":\\\"daughter\\\"}]\",\"salary_revenues\":\"100\",\"pension_revenues\":\"200\",\"farming_activity\":\"0\",\"freelance_activity\":\"0\",\"rent_income\":\"0\",\"unemploymenet_benefit\":\"0\",\"ekas\":\"0\",\"other_benefits_income\":\"0\",\"additional_incomes\":\"1000\",\"interests_property\":\"5000\",\"deposits\":\"5000\",\"real_estate_value_domestic\":\"123\",\"real_estate_value_offshore\":\"123123\",\"value_of_owned_vehicles\":\"0\",\"investments\":\"123123123\"},\"metadata\":{\"source\":\"endorsed\"}}},\"vc\":[\"/ipfs/QmWLCkXmpQSQG6kcf88kZbNCRHFbfZzHG8hSbdn7QndQTL\"],\"iss\":\"did:ethr:0xd502a2c71e8c90e82500a70683f75de38d57dd9f\",\"jwt\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NkstUiJ9.eyJpYXQiOjE2MDM5NzQ2NDQsImV4cCI6MTYxNDUxNTQ0NCwic3ViIjoiZGlkOmV0aHI6MHgxNWI3ZjFiYjJlZTAyYjZjZDhjM2FkMmRhNDEzZDUxMjhlN2U5MzNmIiwiY2xhaW0iOnsiUEVSU09OQUxfRklOQU5DSUFMX1NUQVRVUyI6eyJjbGFpbXMiOnsibmFtZSI6Ik5pa29zIiwic3VybmFtZSI6IlQiLCJob3VzZWhvbGRfY29tcG9zaXRpb24iOiJbe1wibmFtZVwiOlwia1wiLFwicmVsYXRpb25cIjpcIndpZmVcIn0se1wibmFtZVwiOlwiYVwiLFwicmVsYXRpb25cIjpcImRhdWdodGVyXCJ9XSIsInNhbGFyeV9yZXZlbnVlcyI6IjEwMCIsInBlbnNpb25fcmV2ZW51ZXMiOiIyMDAiLCJmYXJtaW5nX2FjdGl2aXR5IjoiMCIsImZyZWVsYW5jZV9hY3Rpdml0eSI6IjAiLCJyZW50X2luY29tZSI6IjAiLCJ1bmVtcGxveW1lbmV0X2JlbmVmaXQiOiIwIiwiZWthcyI6IjAiLCJvdGhlcl9iZW5lZml0c19pbmNvbWUiOiIwIiwiYWRkaXRpb25hbF9pbmNvbWVzIjoiMTAwMCIsImludGVyZXN0c19wcm9wZXJ0eSI6IjUwMDAiLCJkZXBvc2l0cyI6IjUwMDAiLCJyZWFsX2VzdGF0ZV92YWx1ZV9kb21lc3RpYyI6IjEyMyIsInJlYWxfZXN0YXRlX3ZhbHVlX29mZnNob3JlIjoiMTIzMTIzIiwidmFsdWVfb2Zfb3duZWRfdmVoaWNsZXMiOiIwIiwiaW52ZXN0bWVudHMiOiIxMjMxMjMxMjMifSwibWV0YWRhdGEiOnsic291cmNlIjoiZW5kb3JzZWQifX19LCJ2YyI6WyIvaXBmcy9RbVdMQ2tYbXBRU1FHNmtjZjg4a1piTkNSSEZiZlp6SEc4aFNiZG43UW5kUVRMIl0sImlzcyI6ImRpZDpldGhyOjB4ZDUwMmEyYzcxZThjOTBlODI1MDBhNzA2ODNmNzVkZTM4ZDU3ZGQ5ZiJ9.AddDZAobHcE6hG-e9v2PMNq9C3ww-ZqaoMi9KTBTSm1uvkvD37byAPzE1NfDLkpBEpfVYR72qaobDgIVB9yBNgA\"}],\"invalid\":[]}";
        ObjectMapper mapper = new ObjectMapper();
        VerifiableCredential vc = mapper.readValue(test, VerifiableCredential.class);
        System.out.println(vc.toString());
        assertEquals(vc.getFStatus().getClaims().getName(), "Nikos");

    }

    @Test
    public void testCredentialId() throws IOException {
        String test = "{\"did\":\"did:ethr:0x71c67e7a9d0e203aca7305ad7ab39853dd3e5cc0\",\"TAXIS\":{\"TAXIS\":{\"fistName\":\"ΕΥΤΥΧΙΑ\",\"afm\":\"068933130   \",\"lastName\":\"ΒΑΒΟΥΛΑ\",\"fathersName\":\"ΕΜΜΑΝΟΥΗΛ\",\"mothersName\":\"ΑΝΝΑ\",\"dateOfBirth\":\"1950\",\"loa\":\"low\",\"source\":\"TAXIS\"}},\"verified\":[{\"iat\":1600091652,\"exp\":1602683652,\"sub\":\"did:ethr:0x71c67e7a9d0e203aca7305ad7ab39853dd3e5cc0\",\"claim\":{\"TAXIS\":{\"TAXIS\":{\"fistName\":\"ΕΥΤΥΧΙΑ\",\"afm\":\"068933130   \",\"lastName\":\"ΒΑΒΟΥΛΑ\",\"fathersName\":\"ΕΜΜΑΝΟΥΗΛ\",\"mothersName\":\"ΑΝΝΑ\",\"dateOfBirth\":\"1950\",\"loa\":\"low\",\"source\":\"TAXIS\"}},\"id\":\"6705e3de-5a8a-4b17-9052-3554f5949400\"},\"vc\":[\"/ipfs/QmNbicKYQKCsc7GMXSSJMpvJSYgeQ9K2tH15EnbxTydxfQ\"],\"iss\":\"did:ethr:0xd502a2c71e8c90e82500a70683f75de38d57dd9f\",\"jwt\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NkstUiJ9.eyJpYXQiOjE2MDAwOTE2NTIsImV4cCI6MTYwMjY4MzY1Miwic3ViIjoiZGlkOmV0aHI6MHg3MWM2N2U3YTlkMGUyMDNhY2E3MzA1YWQ3YWIzOTg1M2RkM2U1Y2MwIiwiY2xhaW0iOnsiVEFYSVMiOnsiVEFYSVMiOnsiZmlzdE5hbWUiOiLOlc6lzqTOpc6nzpnOkSIsImFmbSI6IjA2ODkzMzEzMCAgICIsImxhc3ROYW1lIjoizpLOkc6Szp_Opc6bzpEiLCJmYXRoZXJzTmFtZSI6Is6VzpzOnM6Rzp3On86lzpfOmyIsIm1vdGhlcnNOYW1lIjoizpHOnc6dzpEiLCJkYXRlT2ZCaXJ0aCI6IjE5NTAiLCJsb2EiOiJsb3ciLCJzb3VyY2UiOiJUQVhJUyJ9fSwiaWQiOiI2NzA1ZTNkZS01YThhLTRiMTctOTA1Mi0zNTU0ZjU5NDk0MDAifSwidmMiOlsiL2lwZnMvUW1OYmljS1lRS0NzYzdHTVhTU0pNcHZKU1lnZVE5SzJ0SDE1RW5ieFR5ZHhmUSJdLCJpc3MiOiJkaWQ6ZXRocjoweGQ1MDJhMmM3MWU4YzkwZTgyNTAwYTcwNjgzZjc1ZGUzOGQ1N2RkOWYifQ.Kxw9I9_-1Xw7-toTglzcakTU6w1K8vcdSct0iFR3r1232MXO7FsqU_TyZr9-CTNzZUiNEmooPgwGWg1t4eWzuwE\"}],\"invalid\":[]}";
        ObjectMapper mapper = new ObjectMapper();
        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
        VerifiableCredential vc = mapper.readValue(test, VerifiableCredential.class);
        assertEquals(vc.getVerified()[0].getClaims().getId(), "6705e3de-5a8a-4b17-9052-3554f5949400");
    }

}
